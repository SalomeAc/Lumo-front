<!DOCTYPE html>
<html lang="es">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./dashboard.css">
    <link rel="stylesheet" href="../components/barnav.css">
    <meta charset="UTF-8">
    <title>Dashboard</title>
</head>

<body>
    <div id="barnav-container"></div>
    <script type="module">
        fetch('/components/barnav.html')
            .then(r => r.text())
            .then(html => {
                document.getElementById('barnav-container').innerHTML = html;
                import('../components/barnav.js');
            });
    </script>
    <button class="menu-toggle" id="menuToggle">☰</button>
    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>
    <div class="app">

        <aside class="sidebar" id="sidebar" aria-label="Panel lateral de navegación">
            <a href="/user-profile/" class="user-block-link">
                <div class="user-block">
                    <div class="user-info" id="user-info">
                        <div class="name">Bienvenido/a, </div>
                        <div class="name"></div>
                        <div class="last-time" style="margin-top: 1rem;">Última actividad: </div>
                        <div class="last-time"> dd/mm/yy </div>
                    </div>
                </div>
            </a>

            <!-- Kanban -->
            <ul class="kanban-statuses" id="kanban-statuses">
                <li><a href="#" id="kanban-board-link" data-status="board" style="font-size: 1.5rem;">Kanban</a></li>
                <div class="lists-title">Ver por:</div>

                <li><a href="#" data-status="unassigned">Por hacer</a></li>
                <li><a href="#" data-status="ongoing">Haciendo</a></li>
                <li><a href="#" data-status="done">Completadas</a></li>
            </ul>

            <!-- Lists -->
            <div>
                <button id="lists-toggle" class="sidebar-section" aria-expanded="false"
                    aria-controls="lists-container">Listas</button>
            </div>
            <ul class="lists" id="lists-container"></ul>

            <button class="btn" id="create-list-btn">Crear nueva lista</button>

            <div class="footer">© 2025 Lumo</div>
        </aside>



        <main>
            <div class="topbar">
                <div class="title">
                    <h1 id="current-list-title">Selecciona una lista </h1>
                </div>
                <div class="actions">

                    <button class="btn" id="new-task-btn" onclick="location.href='/create-task/'">+ Nueva Tarea</button>
                </div>
            </div>
            <section class="tasks-grid" id="tasks-container" aria-label="Lista de tareas"></section>
            <div id="kanban-board" class="kanban-board" aria-label="Tablero Kanban" hidden>
                <div class="kanban-column" data-status="unassigned">
                    <div class="kanban-column-header">
                        <span class="status-dot todo"></span> Por hacer
                    </div>
                    <div class="kanban-cards" id="kanban-col-unassigned"></div>
                </div>
                <div class="kanban-column" data-status="ongoing">
                    <div class="kanban-column-header">
                        <span class="status-dot doing"></span> Haciendo
                    </div>
                    <div class="kanban-cards" id="kanban-col-ongoing"></div>
                </div>
                <div class="kanban-column" data-status="done">
                    <div class="kanban-column-header">
                        <span class="status-dot done"></span> Completadas
                    </div>
                    <div class="kanban-cards" id="kanban-col-done"></div>
                </div>
            </div>
        </main>
    </div>


    <script type="module">

        fetch('../components/barnav.html')

            .then(r => r.text())
            .then(html => {
                document.getElementById('barnav-container').innerHTML = html;
                import('../components/barnav.js');
            });
    </script>
    <script type="module" src="./dashboard.js"></script>


</body>

</html>